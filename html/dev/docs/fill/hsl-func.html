<h1>hsl(r, g, b[, a])</h1>
<div id="row" class="row">
	<textarea id="code" autofocus="">
/**
 * The hsl() function returns the CSS property needed to make the color with the parameters passed in.
 * Don't know what HSL colors are? Go here:
 * http://www.w3schools.com/cssref/css_colors_legal.asp
 * 
 * Usages:
 * hsl(r, g, b)
 * hsl(r, g, b, a)
*/

//The hsl() function must have a parameter for hue (first parameter, 0-255), a parameter for saturation (second parameter, 0-255), a parameter for lightness (third parameter, 0-255), and an optional parameter with opacity (optional fourth patameter, 0-1).
fill(hsl(0, 100, 50));
rect(25, 25, 100, 100);
fill(hsl(120, 100, 50, 0.5));
rect(10, 10, 50, 50);
fill(hsl(240, 100, 50));
rect(230, 25, 90, 90);

/** See also:
 * rgb(r, g, b[, a]): http://devdoodle.net/dev/docs/fill/rgb-func
 * fill([shade] [r, g, b] [color]): http://devdoodle.net/dev/docs/fill/fill-func
 * stroke([shade] [r, g, b] [color]): http://devdoodle.net/dev/docs/fill/stroke-func
*/
	</textarea>
	<iframe id="output" sandbox="allow-scripts"></iframe>
</div>
<style>
	#code {
		color: #fff;
		background: #000;
		font-family: monospace;
		font-size: 1rem;
		resize: none;
		margin-bottom: 8px;
	}
	#row { height: calc(100% - 2rem) }
	#code, #output { height: 100% }
	#output { float: right }
	#code { width: 55% }
	#output { width: 44% }
</style>
<script>
	var footerOff = true,
		noPageOverflow = 400,
		pageOverflowMobile = true,
		code = document.getElementById('code');
	code.addEventListener('keypress', function(e) {
		var oldSelectionStart = this.selectionStart;
		if (e.keyCode === 13) {
			if (this.value[oldSelectionStart - 1] == ',') this.eIndent = true;
			var tabs = this.value.substr(0, oldSelectionStart)
				.split('\n')[this.value.substr(0, oldSelectionStart).split('\n').length - 1]
				.split('\t').length
				- (
					('{([:,'.indexOf(this.value[oldSelectionStart - 1]) + 1)
					? 0
					: (
						this.value[oldSelectionStart - 1] == ';' &amp;&amp; this.eIndent
						? (this.eIndent = false || 2) 
						: 1
					)
				);
			this.value = this.value.substr(0, this.selectionStart) + '\n' + '\t'.repeat(tabs) + this.value.substr(this.selectionStart);
			this.selectionStart = ++oldSelectionStart + tabs;
			this.selectionEnd = this.selectionStart;
			e.preventDefault();
		} else if (e.keyCode == 34) {
			this.value = this.value.substr(0, this.selectionStart) + '""' + this.value.substr(this.selectionStart);
			this.selectionEnd = ++oldSelectionStart;
			e.preventDefault();
		} else if (e.keyCode == 39) {
			this.value = this.value.substr(0, this.selectionStart) + "''" + this.value.substr(this.selectionStart);
			this.selectionEnd = ++oldSelectionStart;
			e.preventDefault();
		} else if (e.keyCode == 40) {
			this.value = this.value.substr(0, this.selectionStart) + '()' + this.value.substr(this.selectionStart);
			this.selectionEnd = ++oldSelectionStart;
			e.preventDefault();
		} else if (e.keyCode == 91) {
			this.value = this.value.substr(0, this.selectionStart) + '[]' + this.value.substr(this.selectionStart);
			this.selectionEnd = ++oldSelectionStart;
			e.preventDefault();
		} else if (e.keyCode == 123) {
			this.value = this.value.substr(0, this.selectionStart) + '{}' + this.value.substr(this.selectionStart);
			this.selectionEnd = ++oldSelectionStart;
			e.preventDefault();
		}
		// console.log(e.keyCode);
		run();
	});
	code.addEventListener('keydown', function(e) {
		if (e.keyCode == 8 &amp;&amp; this.selectionStart == this.selectionEnd) {
			console.log(this.value[this.selectionStart - 1] == '(')
			if (
				(this.value[this.selectionStart - 1] == '"' &amp;&amp; this.value[this.selectionStart] == '"') ||
				(this.value[this.selectionStart - 1] == "'" &amp;&amp; this.value[this.selectionStart] == "'") ||
				(this.value[this.selectionStart - 1] == '(' &amp;&amp; this.value[this.selectionStart] == ')') ||
				(this.value[this.selectionStart - 1] == '[' &amp;&amp; this.value[this.selectionStart] == ']') ||
				(this.value[this.selectionStart - 1] == '{' &amp;&amp; this.value[this.selectionStart] == '}')
			) {
				var oldSelectionStart = this.selectionStart;
				this.value = this.value.substr(0, this.selectionStart - 1) + this.value.substr(this.selectionStart + 1);
				this.selectionEnd = --oldSelectionStart;
				e.preventDefault();
			}
		}
	});
	function createCode() {
		return '&lt;!DOCTYPE html>&lt;html>&lt;head>&lt;title>Output frame&lt;/title>&lt;/head>&lt;style>*{margin:0;max-width:100%;box-sizing:border-box}body{background:#000;color:#fff}#canvas{border:1px solid #fff;-webkit-user-select:none;-moz-user-select:none;cursor:default}#console{height:100px;background:#111;overflow:auto;margin-top:8px}#console:empty{display:none}button{display:block}&lt;/style>&lt;body>&lt;canvas id="canvas">&lt;/canvas>&lt;div id="console">&lt;/div>&lt;button onclick="location.reload()">Restart&lt;/button>&lt;script src="/dev/canvas.js">&lt;/script>&lt;script>\'use strict\';try{this.eval(' + JSON.stringify(code.value) + ')}catch(e){error(e)}&lt;/script>&lt;/body>&lt;/html>';
	}
	function run() {
		document.getElementById('output').srcdoc = createCode();
	}
	var oldValue = code.innerHTML;
	function handleCode() {
		if (code.value != oldValue) {
			oldValue = code.value;
			if (!save.classList.contains('progress')) save.textContent = 'Save';
			run();
		}
	}
	var timeout = setTimeout(handleCode, 1000);
	code.addEventListener('keyup', function() {
		clearTimeout(timeout);
		timeout = setTimeout(handleCode, 1000);
	});
	code.addEventListener('keydown', function() {
		clearTimeout(timeout);
		timeout = setTimeout(handleCode, 1000);
	});
	code.addEventListener('keypress', function() {
		clearTimeout(timeout);
		timeout = setTimeout(handleCode, 1000);
		onbeforeunload = function() {
			return 'You have unsaved code.';
		};
	});
	run();
</script>